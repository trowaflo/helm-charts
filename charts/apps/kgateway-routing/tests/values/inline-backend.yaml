# Test inline backend configuration
routes:
  homeassistant:
    enabled: true
    hostnames:
      - "hass.example.com"
    parentRefs:
      - name: public-gateway
        namespace: kgateway-preview
    rules:
      - matches:
          - path:
              type: PathPrefix
              value: /
        backendRefs:
          - name: homeassistant-backend
            kind: Backend
            group: gateway.kgateway.dev
            weight: 1
        filters:
          - type: RequestHeaderModifier
            requestHeaderModifier:
              set:
                - name: X-Forwarded-Proto
                  value: https
    # Inline backend configuration
    backend:
      type: Static
      static:
        hosts:
          - host: homeassistant.local
            port: 8123

  proxmox:
    enabled: true
    hostnames:
      - "pve.example.com"
    parentRefs:
      - name: private-gateway
        namespace: kgateway-preview
    rules:
      - backendRefs:
          - kind: Backend
            group: gateway.kgateway.dev
            name: proxmox-backend
    backend:
      name: proxmox-backend  # Optional: custom name
      type: Static
      static:
        hosts:
          - host: proxmox1.example.com
            port: 8006
